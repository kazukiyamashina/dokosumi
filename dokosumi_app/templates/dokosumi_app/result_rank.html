{% extends 'dokosumi_app/base.html' %}

{% block content %}
{% load static %}
{% load widget_tweaks %}
            
    {% comment %} ユーザーの価値観 {% endcomment %}
    <div class="title-box3">
        <div class="title-box3-title">
            あなたの価値観
        </div>

        <div style="margin:10 0">
        
            {% comment %} ユーザーの価値観を再帰的に表示 {% endcomment %}
            {% for key, value in values.items %}
                {% if value.param > 0.0 %}
                    <div style="margin:0 10">
                        <div style="text-align:left">『{{ value.description }}』の重要度</div>
                        <div class="progress" style="height: 12px;">
                            <div class="progress-bar bg-info" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width:{{ value.param }}%; text-align:left; padding-left:5px;">
                                {{ value.param }} P
                            </div>
                        </div>
                    </div>
                {% endif %} 
            {% endfor %}

        </div>

    </div>

    {% comment %} Twitterシェアボタン {% endcomment %}
    <div class="middleWrapper">
        <div class="twitter-link btn">
            
            <a href="https://twitter.com/intent/tweet?text=『わたしの住みよい街ランキング』%0a1位 {{ resultRanks.0.station_name.param }}%0a2位 {{ resultRanks.1.station_name.param }}%0a3位 {{ resultRanks.2.station_name.param }}%0a&url=" 
                onClick="window.open(encodeURI(decodeURI(this.href)), 'tweetwindow', 'width=650, height=470, personalbar=0, toolbar=0, scrollbars=1, sizable=1'); return false;" 
                rel="nofollow" 
                id="twitter-link-btn"
                class="twitter-link btn btn-info"
                >
                <img src="{% static 'img/Twitter_Logo_WhiteOnImage.png' %}" alt="Twitterロゴ" width="18" height="16" style="margin:2px; vertical-align:middle;">
                <span style="margin:2px; vertical-align:middle;">あなたの住みよい街ランキング</span>
            </a>
        </div>
    </div>

    {% comment %} 駅ごとのスコアを一覧化 {% endcomment %}
    {% for resultRank in resultRanks %}
        <div class="title-box3">
            <div class="title-box3-title">
                <a class="btn" href="{% url 'town_detail' resultRank.station_name.param %}" style="width:300; padding:1px; color:#fff;">
                    {{ resultRank.rank.param }}位 {{ resultRank.station_name.param }}
                </a>
            </div>

            <div style="margin:10 0">
                
                {% comment %} Google Map {% endcomment %}
                <div style="margin:5 10">
                    {% comment %} <div id="map"></div> {% endcomment %}
                    <iframe src="https://maps.google.co.jp/maps?output=embed&ll={{ resultRank.lat.param }},{{ resultRank.lon.param }}&z=13" style='height:250; width:100%; border:none;'></iframe>
                    <div style="display:none;">
                        <div id="lat">{{ resultRank.lat.param }}</div>
                        <div id="lon">{{ resultRank.lon.param }}</div>
                    </div>
                </div>
                
                {% comment %} 街ごとのスコアを表示 {% endcomment %}
                {% for key, value in resultRank.values.items %}
                    <div style="margin:5 10">
                        <div style="text-align:left">{{ value.description }}</div>
                        <div class="progress" style="height: 12px;">
                            <div class="progress-bar bg-info" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width:{{ value.param }}%; text-align:left; padding-left:5px;">
                                {{ value.param }} P
                            </div>
                        </div>
                    </div>
                {% endfor %}

            </div>
        </div>
    {% endfor %}

{% comment %} JavaScript {% endcomment %}
<script src="{% static 'js/result_rank.js' %}"></script>

{% endblock %}